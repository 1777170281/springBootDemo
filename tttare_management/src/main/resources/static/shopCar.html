<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>购物车模块</title>
	</head>
	<body>
		<h2><p class="bg-primary">购物车demo练习</p></h2>
		<div  id="app" >
			<table  class="table table-bordered">
				<tr>
					<th></th>
					<th>商品名称</th>
					<th>商品价格</th>
					<th>商品数量</th>
					<th>操作</th>
				</tr>
				<tr v-for="(phone,index) in phones">
					<td>{{index}}</td>
					<td>{{phone.name}}</td>
					<td>{{phone.price}}</td>
					<td><input type="button" value="-" class="btn btn-default" @click="changeNum(index,'-')"/>&nbsp;{{phone.num}}&nbsp;
						<input type="button" value="+" class="btn btn-default" @click="changeNum(index,'+')"/></td>
					<td><a href="javascript:void(0)" @click="deleteProduct(index)">删除</a></td>
				</tr>
				
	
			</table>
			<div style="margin-left: 1300px;"><p class="text-info">商品总额:{{totalPrice}}</p></div>
			<button class="btn btn-primary" @click="addProduct()">增加产品</button>
		</div>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<script type="text/javascript" src="js/vue.js" ></script>
		<script type="text/javascript" src="js/jquery-1.8.3.js" ></script>
		<script>
			var vue=new Vue({
				el:'#app',
				data:{
					phones:[{
							name:'iphonexs',
							price:8999,
							num:1
						},{
							name:'huaweiP20',
							price:3999,
							num:1					
						},{
							name:'huaweiMate20',
							price:5999,
							num:1						
						}]
				},computed:{
					totalPrice:function(){
						var len=this.phones.length;
						var sum=0;
						for(var i=0;i<len;i++){
							sum+=this.phones[i].price * this.phones[i].num;
						}
						return sum;
					}
				},methods:{
					deleteProduct:function(ind){
						//参数说明:从index起,删除几个
						this.phones.splice(ind,1);
					},
					changeNum:function(ind,str){
						if('-'==(str)){
							if(this.phones[ind].num <1) return;
							this.phones[ind].num--;
						}else if('+'==(str)){
							this.phones[ind].num++;
						}
					},
					addProduct:function(){
						this.phones.push({
							name:'huaweiMate20Pro',
							price:5999,
							num:1							
						})
					}
				}
			})
		</script>
	</body>
</html>
